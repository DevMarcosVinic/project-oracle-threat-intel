{
  "name": "Projeto Or√°culo v1.0",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.4,
      "position": [576, 288],
      "id": "0477ffea-b61a-4dc3-a0a6-10a696585978",
      "name": "When chat message received",
      "webhookId": "<REDACTED_WEBHOOK_ID>"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=## IDENTIDADE E OBJETIVO\nVoc√™ √© o OR√ÅCULO, um estrategista de elite focado em Intelig√™ncia Competitiva e Efeitos de Segunda Ordem.\nSua miss√£o n√£o √© apenas resumir not√≠cias, mas **projetar cen√°rios futuros** e **recomendar a√ß√µes lucrativas ou defensivas**.\n\nO usu√°rio quer saber: \"Como isso afeta meu bolso, meus investimentos em tecnologia ou a estabilidade global?\"\n\n## INSTRU√á√ïES DE AN√ÅLISE\nAnalise os dados fornecidos e agrupe os insights nestas 3 categorias macro.\nSeja detalhado na an√°lise de causa e efeito. N√£o seja superficial.\n\n---\n### üñ•Ô∏è HARDWARE, IA & SUPPLY CHAIN\n(Foque em: Pre√ßos de GPU/RAM, escassez de chips, avan√ßos de IA, lan√ßamentos que mudam o mercado)\n\n### üí∞ CRIPTO, ATIVOS & ECONOMIA\n(Foque em: Bitcoin, Altcoins, D√≥lar, Ouro, Juros do FED, impacto financeiro)\n\n### üåç GEOPOL√çTICA & RISCO GLOBAL\n(Foque em: Guerras que afetam log√≠stica, leis de tecnologia, instabilidade governamental)\n---\n\n## FORMATO OBRIGAT√ìRIO PARA CADA INSIGHT (Use Markdown):\n\nüö® **[T√çTULO IMPACTANTE DO FATO]**\nüìù **O Cen√°rio:** [Explique o contexto com detalhes suficientes para entender a gravidade]\nüîó **A Conex√£o Oculta:** [Use racioc√≠nio l√≥gico avan√ßado. Ex: Guerra no pa√≠s X corta suprimento do metal Y, que √© usado no chip Z]\nüîÆ **A Predi√ß√£o:** [O que vai acontecer nos pr√≥ximos meses? O que vai subir ou cair de pre√ßo?]\nüí° **Estrat√©gia Sugerida:** [D√™ uma ordem clara: Comprar agora? Vender? Aguardar? Estocar hardware? Monitorar qual indicador?]\n‚ö†Ô∏è **Probabilidade:** [Baixa / M√©dia / Alta / Quase Certeza]\n\n---\n\n## DADOS PARA AN√ÅLISE:\n{{ $json.text }}",
        "messages": {
          "messageValues": [
            {
              "message": "## IDENTIDADE Voc√™ √© o OR√ÅCULO, uma IA de Intelig√™ncia Estrat√©gica. Seu objetivo √© proteger o patrim√¥nio do usu√°rio e identificar oportunidades de lucro atrav√©s da an√°lise de \"Efeitos de Segunda e Terceira Ordem\". Voc√™ pensa como um jogador de xadrez misturado com um analista de Supply Chain.  ## MISS√ÉO Analise a lista de manchetes fornecidas (Geopol√≠tica, Tecnologia, Cripto, Hardware). Ignore fofocas, lan√ßamentos de produtos irrelevantes ou ru√≠do pol√≠tico comum. Fique obcecado por fatos que alteram PRE√áOS ou DISPONIBILIDADE.  ## L√ìGICA DE AN√ÅLISE (O ALGORITMO MENTAL) Para cada not√≠cia relevante, aplique a l√≥gica: \"SE X aconteceu, ENT√ÉO Y ser√° afetado, O QUE CAUSA Z.\" Exemplo: \"Terremoto em Taiwan (Fato) -> TSMC para f√°bricas (Efeito 1) -> Escassez de Chips (Efeito 2) -> Pre√ßo de GPU sobe em 3 meses (Predi√ß√£o).\"  ## FORMATO DE SA√çDA (Obrigat√≥rio) Se n√£o houver nada cr√≠tico, responda apenas: \"Nenhuma anomalia detectada no ciclo atual.\"  Se houver insights, use estritamente este formato para o Telegram:  üö® **ALERTA OR√ÅCULO** üö®  üåç **O Fato:** [Resumo curto da not√≠cia, ex: China restringe exporta√ß√£o de G√°lio] üîó **A Conex√£o:** [Explique a l√≥gica t√©cnica/econ√¥mica. Por que isso importa?] üîÆ **A Predi√ß√£o:** [O que vai acontecer? Ex: Pre√ßo de telas OLED vai subir. Criptos de IA podem valorizar.] ‚ö†Ô∏è **Probabilidade:** [Baixa / M√©dia / Alta / Quase Certeza] üí° **A√ß√£o Sugerida:** [Ex: Compre RAM agora / Venda tal ativo / Aguarde]  --- (Repita para cada insight relevante encontrado)."
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.9,
      "position": [688, 400],
      "id": "4189fe60-fa52-44b8-b34a-75663269ae76",
      "name": "Basic LLM Chain",
      "retryOnFail": true,
      "waitBetweenTries": 5000
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [688, 544],
      "id": "f2f0b659-e39c-412d-b13f-6c2524180be9",
      "name": "Google Gemini Chat Model",
      "retryOnFail": true,
      "waitBetweenTries": 5000,
      "credentials": {
        "googlePalmApi": {
          "id": "<REDACTED_GOOGLE_PALM_ID>",
          "name": "Google Gemini(PaLM) Api account"
        }
      }
    },
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 6
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [-208, 400],
      "id": "cb604dfb-a562-4be7-8735-1338b06f80b4",
      "name": "Agendamento"
    },
    {
      "parameters": {
        "jsCode": "// LISTA DE FONTES DE INTELIG√äNCIA (Formatada)\n// Inclui feeds diretos e bridges via Google News para sites sem RSS oficial\n\nconst urls = [\n  // --- GEOPOL√çTICA & MACROECONOMIA ---\n  \"https://www.aljazeera.com/xml/rss/all.xml\", // Al Jazeera (Vis√£o Oriente/Global)\n  \"https://news.google.com/rss/search?q=site:reuters.com/world+when:1d&hl=en-US&gl=US&ceid=US:en\", // Reuters World (Via Google News - Bypass)\n  \"https://oilprice.com/rss/main\", // OilPrice (Energia dita o custo industrial)\n  \"https://www.federalreserve.gov/feeds/press_all.xml\", // FED Press Releases (Juros EUA)\n\n  // --- HARDWARE & SUPPLY CHAIN (Pre√ßos de Pe√ßas) ---\n  \"https://news.google.com/rss/search?q=site:trendforce.com/presscenter+when:7d&hl=en-US&gl=US&ceid=US:en\", // TrendForce (O \"Or√°culo\" dos pre√ßos de RAM/SSD)\n  \"https://www.digitimes.com/rss/daily.xml\", // Digitimes (Cadeia de suprimentos Taiwan)\n  \"https://news.google.com/rss/search?q=site:wccftech.com+hardware+when:2d&hl=en-US&gl=US&ceid=US:en\", // Wccftech (Rumores de Hardware)\n  \"https://news.google.com/rss/search?q=site:videocardz.com+when:2d&hl=en-US&gl=US&ceid=US:en\", // Videocardz (Vazamentos de GPU)\n\n  // --- CRIPTO & ATIVOS ---\n  \"https://www.coindesk.com/arc/outboundfeeds/rss/\", // CoinDesk (Feed Oficial Arc)\n  \"https://cointelegraph.com/rss\", // Cointelegraph\n  // Whale Alert n√£o tem RSS. Usamos busca de \"Whale Alert\" no Google News para pegar not√≠cias sobre grandes movimentos\n  \"https://news.google.com/rss/search?q=Whale+Alert+crypto+transaction+when:1d&hl=en-US&gl=US&ceid=US:en\", \n\n  // --- CIBERSEGURAN√áA & RISCO DIGITAL ---\n  \"https://thehackernews.com/rss.xml\", // The Hacker News\n  \"https://www.bleepingcomputer.com/feed/\" // BleepingComputer\n];\n\n// Mapeia para o formato que o n8n l√™ (um item por execu√ß√£o)\nreturn urls.map(url => ({ json: { url } }));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [16, 400],
      "id": "440b90bf-b86c-4641-88cf-6d8e29812443",
      "name": "Lista de Fontes"
    },
    {
      "parameters": {
        "jsCode": "// AGREGADOR\n// Este n√≥ recebe centenas de not√≠cias vindas de todos os RSS acima\n// Ele vai filtrar, limpar e juntar tudo num texto s√≥ para a IA\n\n// 1. Pega todos os itens recebidos\nconst allItems = items;\n\n// 2. Opcional: Filtrar duplicatas por titulo ou link (simples)\nconst uniqueItems = [];\nconst seenUrls = new Set();\n\nfor (const item of allItems) {\n  const link = item.json.link || item.json.guid;\n  if (!seenUrls.has(link)) {\n    seenUrls.add(link);\n    uniqueItems.push(item);\n  }\n}\n\n// 3. Limita para as 40 mais recentes (para n√£o estourar o limite da IA)\n// Assumindo que o RSS j√° traz as novas primeiro, pegamos o slice inicial\nconst recentNews = uniqueItems.slice(0, 40);\n\n// 4. Monta o texto final\nlet combinedText = \"\";\nrecentNews.forEach(item => {\n  const title = item.json.title || \"Sem Titulo\";\n  const desc = item.json.contentSnippet || item.json.description || \"\";\n  combinedText += `Machete: ${title}\\nResumo: ${desc}\\nLink: ${item.json.link}\\n---\\n`;\n});\n\nreturn [{ json: { text: combinedText } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [464, 400],
      "id": "bc2610b9-7f82-4cdd-9a3b-6850c07f7f48",
      "name": "Agregador de Dados"
    },
    {
      "parameters": {
        "chatId": "<REDACTED_CHAT_ID>",
        "text": "={{ $json.text_part }}",
        "additionalFields": {
          "appendAttribution": false,
          "parse_mode": "Markdown"
        }
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [1184, 400],
      "id": "d48cda95-8fa1-47df-9742-1efd69bfdc10",
      "name": "Telegram Bot",
      "webhookId": "<REDACTED_WEBHOOK_ID>",
      "credentials": {
        "telegramApi": {
          "id": "<REDACTED_TELEGRAM_API_ID>",
          "name": "Telegram Projeto Oraculo"
        }
      }
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "options": {
          "ignoreSSL": true
        }
      },
      "type": "n8n-nodes-base.rssFeedRead",
      "typeVersion": 1.2,
      "position": [240, 400],
      "id": "6dfc565b-35c7-44de-bbbe-73ae26ab7dfe",
      "name": "Leitor RSS",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "jsCode": "// CONFIGURA√á√ÉO\nconst MAX_LENGTH = 3800; // Deixamos uma margem de seguran√ßa (limite √© 4096)\nconst content = items[0].json.text; // O texto que veio da IA\n\n// Se o texto for curto, passa direto\nif (content.length <= MAX_LENGTH) {\n  return [{ json: { text_part: content } }];\n}\n\n// Se for longo, divide em peda√ßos\nconst chunks = content.match(new RegExp(`[\\\\s\\\\S]{1,${MAX_LENGTH}}`, 'g')) || [];\n\n// Retorna v√°rios itens. O n8n vai rodar o n√≥ do Telegram uma vez para cada item.\nreturn chunks.map((chunk, index) => ({\n  json: {\n    text_part: `(Parte ${index + 1}/${chunks.length})\\n\\n${chunk}`\n  }\n}));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1008, 400],
      "id": "517eb730-50ed-4a7c-9f42-ba68cdbfc1cc",
      "name": "Code in JavaScript"
    }
  ],
  "pinData": {},
  "connections": {
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Agendamento": {
      "main": [
        [
          {
            "node": "Lista de Fontes",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Lista de Fontes": {
      "main": [
        [
          {
            "node": "Leitor RSS",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Leitor RSS": {
      "main": [
        [
          {
            "node": "Agregador de Dados",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Agregador de Dados": {
      "main": [
        [
          {
            "node": "Basic LLM Chain",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Basic LLM Chain": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Telegram Bot",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1",
    "binaryMode": "separate",
    "availableInMCP": false
  },
  "versionId": "4ae55b6c-ba4d-4220-8a22-dee88c4d772a",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "<REDACTED_INSTANCE_ID>"
  },
  "id": "CUDEslp3OPJhQQq1F-C8r",
  "tags": []
}